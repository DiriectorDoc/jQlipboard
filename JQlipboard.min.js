!function(e){if(!e)return;window.qlipboard={};let t="undefined"!=typeof InstallTrigger,o=e=>e[0]&&"IMG"==e[0].tagName?"image":e.val()||e.html(),n=t=>{let n=t instanceof e?t.clone():null;window.qlipboard.jqobj=n,navigator.clipboard.readText().then(e=>{window.qlipboard.text=window.qlipboard.clipboard=e}),n&&(window.qlipboard.text=o(n)||window.qlipboard.clipboard)},i=(e,t)=>e.val(e.val().slice(0,e[0].selectionStart)+t+e.val().slice(e[0].selectionEnd)),r=e=>{let o=e=>{alert('Browser has been denied access clipboard. Some features may not work until permission is granted.\nTo grant permission, go into your browser setting and allow "Clipboard"')};t?browser.permissions.request({permissions:["clipboardWrite"]}).then(e=>{e||o()}):navigator.permissions.query({name:"clipboard-read"}).then(e=>{"denied"==e.state&&o()}),r=s},s=e=>0,a=e=>document.execCommand(e)||(e=>{throw 0})(),c=t=>e(":focus").length?e(":focus"):e(document.activeElement);e.fn.copy=function(){return this.parent().length?(this.select(),e.copy(),n(this),"none"===this.css("user-select")&&e.copy(this.val()||this.html()),this):this.css({position:"absolute",opacity:0,color:"rgba(0,0,0,0)","-webkit-user-select":"auto","-khtml-user-select":"auto","-moz-user-select":"auto","-ms-user-select":"auto","user-select":"auto"}).appendTo("body").copy().remove()},e.fn.paste=function(){let t=this[0].tagName;if("INPUT"==t||"TEXTAREA"==t){if(this.is(":focus")||this[0]===document.activeElement&&(this[0].type||this[0].href))return e.paste()?this:this.val(window.qlipboard.text);let t=c();return this.focus(),e.paste||i(this,window.qlipboard.text),t.focus(),this}return this.append(window.qlipboard.jqobj.clone())},e.fn.cut=function(){return this.copy().remove()};let l=e.fn.select;e.fn.select=function(e,t,o,n){if("INPUT"==this[0].tagName||"TEXTAREA"==this[0].tagName)return l(e,t,o,n);if(document.selection){let e=document.body.createTextRange();e.moveToElementText(this[0]),e.select().createTextRange()}else if(window.getSelection){let e=document.createRange(),t=window.getSelection();e.selectNode(this[0]),t.removeAllRanges(),t.addRange(e)}else console.warn("Could not select element");return this},e.cut=function(){try{return t&&r(),a("cut")}catch(t){return t&&(console.error(t),console.info("Trying $.copy() instead")),e.copy()&&i(c(),"")}},e.copy=function(o){if(window.qlipboard={},void 0!==o)e("<a>").html(o).copy();else try{return t&&r(),a("copy")}catch(e){if(e&&console.error(e),t)return!1;let o=!0;if(navigator.clipboard){console.info("Trying navigator.clipboard.writeText() instead");let e="";window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),r(),navigator.clipboard.writeText(e),n()}else o=!!console.error("Cannot copy text to clipboard");return o}},e.paste=function(){try{return a("paste")}catch(e){e&&console.warn(e);let t=!0;return r(),navigator.clipboard.readText().then(e=>{i(c(),e)}).catch(e=>{t=!!console.error("Could not execute paste",e)}),t}},e.jQlipboard=function(t){switch((t={permissionPrompt:t.permissionPrompt||"when needed",permissionAlert:t.permissionAlert||"when needed",copyListener:t.copyListener||void 0===t.copyListener}).clipboardVar||(delete window.qlipboard.clipboard,n=function(e){let t=null==e?null:e.clone();window.qlipboard.jqobj=t,window.qlipboard.text=null,t&&(window.qlipboard.text=o(t)||"")}),"immediate"==t.permissionPrompt&&navigator.clipboard.readText().then(s),t.permissionAlert){case"immediate":r();case"never":r=s}navigator.permissions.query({name:"clipboard-read"}).then(e=>{switch(e.state){case"denied":case"prompt":console.warn("Browser does not have permission to access clipboard. Some features may not work until permission is granted."),console.info('To agrant permission, go into your browser setting and allow "Clipboard"'),"never"==t.permissionAlert&&(r=s);break;case"granted":r=s}}),t.copyListener&&(e(document).on||e(document).bind)("copy",n)},e.jQlipboardVersion="0.1.2"}(function(){try{return jQuery}catch(e){return console.warn("jQuery not detected. You must use a jQuery version of 1.0 or newer to run this plugin.")}}());